<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do App</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #4F46E5; /* Indigo */
            --primary-dark: #4338CA;
            --secondary: #6B7280; /* Gray */
            --accent: #10B981; /* Green */
            --danger: #EF4444; /* Red */
            --warning: #F59E0B; /* Amber */
            --info: #3B82F6; /* Blue */
            --background: #F9FAFB; /* Light Gray */
            --text: #1F2937; /* Dark Gray */
            --card-bg: #FFFFFF;
            --border: #E5E7EB;
        }

        .dark {
            --primary: #818CF8;
            --primary-dark: #6366F1;
            --secondary: #9CA3AF;
            --accent: #34D399;
            --danger: #F87171;
            --warning: #FBBF24;
            --info: #60A5FA;
            --background: #111827;
            --text: #F3F4F6;
            --card-bg: #1F2A44;
            --border: #374151;
        }

        body {
            background-color: var(--background);
            color: var(--text);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            transition: all 0.3s ease;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-height: 44px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background-color: #4B5563;
        }

        .input {
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            background-color: var(--card-bg);
            color: var(--text);
            width: 100%;
            font-size: 1rem;
            transition: all 0.2s ease;
        }

        .input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .dark .input {
            background-color: var(--card-bg);
            border-color: var(--border);
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 1.5rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: var(--card-bg);
            border-radius: 0.75rem;
            max-width: 90%;
            width: 500px;
            padding: 1.5rem;
            position: relative;
        }

        .task-container {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .task-container.completed {
            opacity: 0.7;
        }

        .task-container.completed .task-title {
            text-decoration: line-through;
            color: var(--accent);
        }

        .custom-checkbox {
            width: 1.25rem;
            height: 1.25rem;
            border: 2px solid var(--border);
            border-radius: 0.25rem;
            background-color: var(--card-bg);
            cursor: pointer;
            appearance: none;
            transition: all 0.2s ease;
        }

        .custom-checkbox:checked {
            background-color: var(--primary);
            border-color: var(--primary);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%23ffffff'%3E%3Cpath fill-rule='evenodd' d='M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z' clip-rule='evenodd'/%3E%3C/svg%3E");
            background-size: 100% 100%;
        }

        .dropdown {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background-color: var(--card-bg);
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 20;
            min-width: 200px;
        }

        .dropdown.active {
            display: block;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 56px;
            height: 28px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #D1D5DB;
            transition: 0.4s;
            border-radius: 28px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary);
        }

        input:checked + .slider:before {
            transform: translateX(28px);
        }

        .priority-high {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .priority-medium {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .priority-low {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--accent);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .due-expired {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .due-soon {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .due-future {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--accent);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .graph-container canvas {
            max-height: 300px;
            width: 100%;
        }

        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .hamburger-menu {
                display: block;
            }

            .header-controls {
                position: fixed;
                top: 0;
                right: -100%;
                width: 75%;
                height: 100%;
                background-color: var(--card-bg);
                z-index: 30;
                transition: right 0.3s ease;
                padding: 1.5rem;
                display: flex;
                flex-direction: column;
                gap: 1rem;
                box-shadow: -4px 0 10px rgba(0, 0, 0, 0.2);
            }

            .header-controls.active {
                right: 0;
            }
        }
    </style>
</head>
<body class="min-h-screen">
    <div id="loginPage" class="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800">
        <div class="card max-w-md w-full">
            <div class="text-center mb-6">
                <h1 class="text-2xl font-bold text-gray-800 dark:text-white">To-Do App</h1>
                <p class="text-gray-600 dark:text-gray-400 mt-2">Manage your tasks with ease</p>
            </div>

            <div class="flex justify-center mb-6">
                <button id="loginTabBtn" class="px-4 py-2 text-primary font-medium border-b-2 border-primary">Login</button>
                <button id="registerTabBtn" class="px-4 py-2 text-gray-500 dark:text-gray-400 font-medium">Register</button>
            </div>

            <form id="loginForm" class="space-y-4">
                <div>
                    <label for="loginEmail" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email</label>
                    <input type="email" id="loginEmail" class="input" required>
                </div>
                <div>
                    <label for="loginPassword" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Password</label>
                    <input type="password" id="loginPassword" class="input" required>
                </div>
                <button type="submit" class="btn btn-primary w-full">Login</button>
            </form>

            <form id="registerForm" class="space-y-4 hidden">
                <div>
                    <label for="registerName" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Full Name</label>
                    <input type="text" id="registerName" class="input" required>
                </div>
                <div>
                    <label for="registerEmail" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email</label>
                    <input type="email" id="registerEmail" class="input" required>
                </div>
                <div>
                    <label for="confirmEmail" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Confirm Email</label>
                    <input type="email" id="confirmEmail" class="input" required>
                </div>
                <div>
                    <label for="registerPassword" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Password</label>
                    <input type="password" id="registerPassword" class="input" required>
                </div>
                <div>
                    <label for="confirmPassword" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Confirm Password</label>
                    <input type="password" id="confirmPassword" class="input" required>
                </div>
                <div>
                    <label for="phoneNumber" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Phone Number</label>
                    <input type="tel" id="phoneNumber" class="input" required>
                </div>
                <div>
                    <label for="countrySelect" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Country</label>
                    <select id="countrySelect" class="input" required>
                        <option value="" disabled selected>Select Country</option>
                    </select>
                </div>
                <div>
                    <label for="roleSelect" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Role</label>
                    <select id="roleSelect" class="input" required>
                        <option value="" disabled selected>Select Role</option>
                        <option value="Manager">Manager</option>
                        <option value="Admin">Admin</option>
                        <option value="Staff">Staff</option>
                        <option value="Customer">Customer</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary w-full">Register</button>
            </form>

            <div id="loginError" class="hidden text-danger text-center mt-4 text-sm"></div>
        </div>
    </div>

    <div id="appPage" class="hidden min-h-screen flex flex-col">
        <header class="bg-white dark:bg-gray-900 shadow-sm py-4 px-6">
            <div class="flex justify-between items-center max-w-7xl mx-auto">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-primary rounded-lg flex items-center justify-center text-white text-xl font-bold mr-3">
                        <i class="fas fa-check-double"></i>
                    </div>
                    <h1 class="text-xl font-bold">To-Do App</h1>
                </div>

                <button class="hamburger-menu text-gray-600 dark:text-gray-300 md:hidden">
                    <i class="fas fa-bars text-xl"></i>
                </button>

                <div class="header-controls flex items-center space-x-4">
                    <div class="timer font-mono text-sm">
                        <span id="timerDisplay">00:00:00</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="themeToggle">
                        <span class="slider"></span>
                    </label>
                    <div class="relative">
                        <button id="notificationBtn" class="text-gray-600 dark:text-gray-300">
                            <i class="fas fa-bell text-xl"></i>
                            <span id="notificationBadge" class="notification-badge">3</span>
                        </button>
                        <div id="notificationDropdown" class="dropdown p-3">
                            <div class="space-y-3">
                                <div class="p-2 text-sm border-b border-gray-200 dark:border-gray-700">
                                    <div class="font-semibold">New Task Assigned</div>
                                    <div>You have been assigned a new high priority task.</div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400 mt-1">2 minutes ago</div>
                                </div>
                                <!-- Add more notifications as needed -->
                            </div>
                        </div>
                    </div>
                    <div class="relative">
                        <button id="profileBtn">
                            <div class="w-10 h-10 rounded-full overflow-hidden border-2 border-primary">
                                <img id="profileImage" src="https://picsum.photos/100?random=1" alt="Profile" class="w-full h-full object-cover">
                            </div>
                        </button>
                        <div id="profileDropdown" class="dropdown p-2">
                            <button class="w-full text-left p-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded" data-status="login">Login</button>
                            <button class="w-full text-left p-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded" data-status="shadow">Shadow</button>
                            <button class="w-full text-left p-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded" data-status="break">Break</button>
                            <button class="w-full text-left p-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded" data-status="logout">Logout</button>
                            <div class="border-t border-gray-200 dark:border-gray-700 my-2"></div>
                            <button id="viewProfileBtn" class="w-full text-left p-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded">View Profile</button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main class="flex-grow p-6">
            <div class="max-w-7xl mx-auto">
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                    <div class="lg:col-span-3">
                        <div class="card mb-6">
                            <h2 class="text-xl font-semibold mb-4">Task Overview</h2>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="p-4 rounded-lg bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900 dark:to-blue-800">
                                    <h3 class="text-sm font-medium text-blue-800 dark:text-blue-200">Total Tasks</h3>
                                    <p id="totalTasksCount" class="text-2xl font-bold text-blue-900 dark:text-blue-100">12</p>
                                </div>
                                <div class="p-4 rounded-lg bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900 dark:to-green-800">
                                    <h3 class="text-sm font-medium text-green-800 dark:text-green-200">Completed</h3>
                                    <p id="completedTasksCount" class="text-2xl font-bold text-green-900 dark:text-green-100">5</p>
                                </div>
                                <div class="p-4 rounded-lg bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900 dark:to-yellow-800">
                                    <h3 class="text-sm font-medium text-yellow-800 dark:text-yellow-200">Pending</h3>
                                    <p id="pendingTasksCount" class="text-2xl font-bold text-yellow-900 dark:text-yellow-100">7</p>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-xl font-semibold">Tasks</h2>
                                <div class="flex space-x-2">
                                    <button id="listViewBtn" class="btn btn-primary"><i class="fas fa-list"></i></button>
                                    <button id="graphViewBtn" class="btn btn-secondary"><i class="fas fa-chart-bar"></i></button>
                                </div>
                            </div>

                            <div class="flex flex-wrap gap-4 mb-4">
                                <div class="w-full sm:w-48">
                                    <input type="text" id="searchInput" placeholder="Search tasks..." class="input">
                                </div>
                                <div class="w-full sm:w-48">
                                    <select id="categoryFilter" class="input">
                                        <option value="all">All Categories</option>
                                        <option value="work">Work</option>
                                        <option value="personal">Personal</option>
                                        <option value="shopping">Shopping</option>
                                        <option value="health">Health</option>
                                        <option value="finance">Finance</option>
                                    </select>
                                </div>
                                <div class="w-full sm:w-48">
                                    <select id="priorityFilter" class="input">
                                        <option value="all">All Priorities</option>
                                        <option value="high">High</option>
                                        <option value="medium">Medium</option>
                                        <option value="low">Low</option>
                                    </select>
                                </div>
                                <div class="w-full sm:w-48">
                                    <select id="statusFilter" class="input">
                                        <option value="all">All</option>
                                        <option value="active">Active</option>
                                        <option value="completed">Completed</option>
                                    </select>
                                </div>
                            </div>

                            <div id="taskListView" class="space-y-4">
                                <div id="tasksContainer"></div>
                            </div>
                            <div id="graphView" class="graph-container hidden">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div class="card">
                                        <h3 class="text-lg font-semibold mb-4">Tasks by Status</h3>
                                        <canvas id="statusChart"></canvas>
                                    </div>
                                    <div class="card">
                                        <h3 class="text-lg font-semibold mb-4">Tasks by Priority</h3>
                                        <canvas id="priorityChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="space-y-6">
                        <div class="card">
                            <button id="addTaskBtn" class="btn btn-primary w-full mb-2"><i class="fas fa-plus mr-2"></i>Add Task</button>
                            <button id="importTasksBtn" class="btn btn-secondary w-full mb-2"><i class="fas fa-file-import mr-2"></i>Import</button>
                            <button id="exportTasksBtn" class="btn btn-secondary w-full"><i class="fas fa-file-export mr-2"></i>Export</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="addTaskModal" class="modal">
        <div class="modal-content">
            <button class="modal-close absolute top-4 right-4 text-gray-500 dark:text-gray-400">
                <i class="fas fa-times"></i>
            </button>
            <h3 class="text-xl font-semibold mb-4">Add New Task</h3>
            <form id="addTaskForm" class="space-y-4">
                <div>
                    <label for="taskTitle" class="block text-sm font-medium mb-1">Title</label>
                    <input type="text" id="taskTitle" class="input" required>
                </div>
                <div>
                    <label for="taskDescription" class="block text-sm font-medium mb-1">Description</label>
                    <textarea id="taskDescription" rows="3" class="input"></textarea>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="taskPriority" class="block text-sm font-medium mb-1">Priority</label>
                        <select id="taskPriority" class="input" required>
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                    <div>
                        <label for="taskDueDate" class="block text-sm font-medium mb-1">Due Date</label>
                        <input type="date" id="taskDueDate" class="input" required>
                    </div>
                </div>
                <div class="flex justify-end space-x-2">
                    <button type="button" class="modal-close btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Task</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
            document.getElementById('themeToggle').checked = true;
        }

        document.addEventListener('DOMContentLoaded', () => {
            const generateRandomId = () => Math.random().toString(36).substring(2, 15);

            let appState = {
                currentUser: null,
                users: [],
                tasks: [],
                notifications: [],
                timerStatus: 'logged-out',
                timerSeconds: 0,
                timerInterval: null,
            };

            const saveState = () => {
                localStorage.setItem('todoAppState', JSON.stringify(appState));
            };

            const handleLogin = (email, password) => {
                const user = appState.users.find(user => user.email === email && user.password === password);
                if (user) {
                    appState.currentUser = user;
                    appState.timerStatus = 'logged-in';
                    saveState();
                    document.getElementById('loginPage').classList.add('hidden');
                    document.getElementById('appPage').classList.remove('hidden');
                    return true;
                } else {
                    document.getElementById('loginError').classList.remove('hidden');
                    document.getElementById('loginError').textContent = 'Invalid email or password';
                    return false;
                }
            };

            document.getElementById('loginForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                handleLogin(email, password);
            });

            document.getElementById('themeToggle').addEventListener('change', () => {
                document.documentElement.classList.toggle('dark');
            });

            document.getElementById('addTaskBtn').addEventListener('click', () => {
                document.getElementById('addTaskModal').classList.add('active');
            });

            document.querySelectorAll('.modal-close').forEach(btn => {
                btn.addEventListener('click', () => {
                    btn.closest('.modal').classList.remove('active');
                });
            });

            // Utility Functions
            const generateRandomId = () => Math.random().toString(36).substring(2, 15);

            const formatDate = (date) => {
                const options = { year: 'numeric', month: 'short', day: 'numeric' };
                return new Date(date).toLocaleDateString(undefined, options);
            };

            const formatDateForInput = (date) => {
                return new Date(date).toISOString().split('T')[0];
            };

            const formatTime = (seconds) => {
                const h = Math.floor(seconds / 3600);
                const m = Math.floor((seconds % 3600) / 60);
                const s = Math.floor(seconds % 60);
                return `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            };

            // State Management
            let appState = {
                currentUser: null,
                users: [],
                tasks: [],
                notifications: [],
                timerStatus: 'logged-out',
                timerSeconds: 0,
                timerInterval: null,
                lastAction: null,
                redoStack: [],
                selectedTasks: [],
                multiSelectMode: false,
            };

            const loadState = () => {
                const savedState = localStorage.getItem('todoAppState');
                if (savedState) {
                    try {
                        const parsedState = JSON.parse(savedState);
                        appState = { ...appState, ...parsedState };
                        appState.tasks.forEach(task => {
                            task.dueDate = new Date(task.dueDate);
                            task.createdAt = new Date(task.createdAt);
                            if (task.completedAt) task.completedAt = new Date(task.completedAt);
                        });
                        appState.selectedTasks = [];
                        appState.multiSelectMode = false;
                        appState.timerInterval = null;
                    } catch (e) {
                        console.error('Failed to parse saved state:', e);
                    }
                }
            };

            const saveState = () => {
                const stateToSave = { ...appState };
                delete stateToSave.timerInterval;
                delete stateToSave.selectedTasks;
                delete stateToSave.multiSelectMode;
                localStorage.setItem('todoAppState', JSON.stringify(stateToSave));
            };

            // Initialize Data
            const initializeCountries = () => {
                const countries = [
                    "Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Antigua and Barbuda", "Argentina", "Armenia", "Australia", "Austria",
                    "Azerbaijan", "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", "Belize", "Benin", "Bhutan",
                    "Bolivia", "Bosnia and Herzegovina", "Botswana", "Brazil", "Brunei", "Bulgaria", "Burkina Faso", "Burundi", "Cabo Verde", "Cambodia",
                    "Cameroon", "Canada", "Central African Republic", "Chad", "Chile", "China", "Colombia", "Comoros", "Congo", "Costa Rica",
                    "Croatia", "Cuba", "Cyprus", "Czech Republic", "Denmark", "Djibouti", "Dominica", "Dominican Republic", "Ecuador", "Egypt",
                    "El Salvador", "Equatorial Guinea", "Eritrea", "Estonia", "Eswatini", "Ethiopia", "Fiji", "Finland", "France", "Gabon",
                    "Gambia", "Georgia", "Germany", "Ghana", "Greece", "Grenada", "Guatemala", "Guinea", "Guinea-Bissau", "Guyana",
                    "Haiti", "Honduras", "Hungary", "Iceland", "India", "Indonesia", "Iran", "Iraq", "Ireland", "Israel",
                    "Italy", "Jamaica", "Japan", "Jordan", "Kazakhstan", "Kenya", "Kiribati", "Kuwait", "Kyrgyzstan", "Laos",
                    "Latvia", "Lebanon", "Lesotho", "Liberia", "Libya", "Liechtenstein", "Lithuania", "Luxembourg", "Madagascar", "Malawi",
                    "Malaysia", "Maldives", "Mali", "Malta", "Marshall Islands", "Mauritania", "Mauritius", "Mexico", "Micronesia", "Moldova",
                    "Monaco", "Mongolia", "Montenegro", "Morocco", "Mozambique", "Myanmar", "Namibia", "Nauru", "Nepal", "Netherlands",
                    "New Zealand", "Nicaragua", "Niger", "Nigeria", "North Korea", "North Macedonia", "Norway", "Oman", "Pakistan", "Palau",
                    "Palestine", "Panama", "Papua New Guinea", "Paraguay", "Peru", "Philippines", "Poland", "Portugal", "Qatar", "Romania",
                    "Russia", "Rwanda", "Saint Kitts and Nevis", "Saint Lucia", "Saint Vincent and the Grenadines", "Samoa", "San Marino", "Sao Tome and Principe", "Saudi Arabia", "Senegal",
                    "Serbia", "Seychelles", "Sierra Leone", "Singapore", "Slovakia", "Slovenia", "Solomon Islands", "Somalia", "South Africa", "South Korea",
                    "South Sudan", "Spain", "Sri Lanka", "Sudan", "Suriname", "Sweden", "Switzerland", "Syria", "Taiwan", "Tajikistan",
                    "Tanzania", "Thailand", "Timor-Leste", "Togo", "Tonga", "Trinidad and Tobago", "Tunisia", "Turkey", "Turkmenistan", "Tuvalu",
                    "Uganda", "Ukraine", "United Arab Emirates", "United Kingdom", "United States", "Uruguay", "Uzbekistan", "Vanuatu", "Vatican City", "Venezuela",
                    "Vietnam", "Yemen", "Zambia", "Zimbabwe"
                ];

                const countrySelect = document.getElementById('countrySelect');
                countries.forEach(country => {
                    const option = document.createElement('option');
                    option.value = country;
                    option.textContent = country;
                    countrySelect.appendChild(option);
                });
            };

            const generateUsers = () => {
                if (appState.users.length > 0) return;
                const roles = ["Manager", "Admin", "Staff", "Customer"];
                const fakeUsers = [];
                for (let i = 1; i <= 10; i++) {
                    const firstName = ['John', 'Jane', 'Mike', 'Emily', 'David', 'Sarah', 'Chris', 'Lisa', 'Bob', 'Anna'][i % 10];
                    const lastName = ['Smith', 'Johnson', 'Williams', 'Jones', 'Brown', 'Miller', 'Davis', 'Garcia', 'Wilson', 'Taylor'][i % 10];
                    fakeUsers.push({
                        id: generateRandomId(),
                        name: `${firstName} ${lastName}`,
                        email: `${firstName.toLowerCase()}.${lastName.toLowerCase()}@example.com`,
                        password: "password123",
                        phone: `+1 (555) ${String(100 + i).padStart(3, '0')}-${String(1000 + i).substring(1)}`,
                        country: "United States",
                        role: roles[i % roles.length],
                        profilePic: `https://picsum.photos/200?random=${i}`
                    });
                }
                appState.users = fakeUsers;
            };

            const generateTasks = () => {
                if (appState.tasks.length > 0) return;
                const taskTitles = [
                    "Prepare project proposal", "Client meeting", "Update website content",
                    "Design marketing materials", "Research competitors", "Quarterly report",
                    "Team building event", "Software update", "Client follow-up call",
                    "Review product feedback", "Inventory check", "Staff training"
                ];
                const taskDescriptions = [
                    "Prepare a comprehensive project proposal for the client meeting next week.",
                    "Meet with client to discuss project requirements and timeline.",
                    "Update the website with new product information and blog posts.",
                    "Create new marketing materials for the upcoming product launch.",
                    "Research competitors' products and pricing strategies.",
                    "Compile data and prepare the quarterly financial report.",
                    "Organize a team building event to improve team collaboration.",
                    "Update all systems to the latest software version.",
                    "Call client to follow up on the project progress and gather feedback.",
                    "Review customer feedback and identify areas for improvement.",
                    "Perform a complete inventory check and update the inventory system.",
                    "Conduct training sessions for new staff members."
                ];
                const categories = ["work", "personal", "shopping", "health", "finance"];
                const priorities = ["low", "medium", "high"];
                const sampleTasks = [];
                const now = new Date();
                const pastDate = new Date();
                pastDate.setDate(now.getDate() - 30);
                const futureDate = new Date();
                futureDate.setDate(now.getDate() + 30);
                for (let i = 0; i < 12; i++) {
                    const dueDate = new Date(pastDate.getTime() + Math.random() * (futureDate.getTime() - pastDate.getTime()));
                    const completed = Math.random() > 0.6;
                    sampleTasks.push({
                        id: generateRandomId(),
                        title: taskTitles[i],
                        description: taskDescriptions[i],
                        category: categories[Math.floor(Math.random() * categories.length)],
                        priority: priorities[Math.floor(Math.random() * priorities.length)],
                        dueDate: dueDate,
                        createdAt: new Date(pastDate.getTime() + Math.random() * (now.getTime() - pastDate.getTime())),
                        completedAt: completed ? new Date(pastDate.getTime() + Math.random() * (now.getTime() - pastDate.getTime())) : null,
                        assignee: Math.random() > 0.3 ? appState.users[Math.floor(Math.random() * appState.users.length)].id : null,
                        workTime: Math.floor(Math.random() * 3600),
                        completed: completed,
                        subtasks: Array.from({ length: Math.floor(Math.random() * 3) }, (_, j) => ({
                            id: generateRandomId(),
                            title: `Subtask ${j + 1} for ${taskTitles[i]}`,
                            completed: Math.random() > 0.5
                        })),
                        notes: Math.random() > 0.7 ? "Additional notes about this task and its requirements." : ""
                    });
                }
                appState.tasks = sampleTasks;
            };

            const generateNotifications = () => {
                if (appState.notifications.length > 0) return;
                const notifications = [
                    {
                        id: generateRandomId(),
                        title: "New Task Assigned",
                        message: "You have been assigned a new high priority task.",
                        time: "2 minutes ago",
                        read: false
                    },
                    {
                        id: generateRandomId(),
                        title: "Task Due Soon",
                        message: "Task \"Update Website\" is due in 3 hours.",
                        time: "1 hour ago",
                        read: false
                    },
                    {
                        id: generateRandomId(),
                        title: "Task Completed",
                        message: "John Doe completed task \"Email Marketing Campaign\".",
                        time: "3 hours ago",
                        read: false
                    }
                ];
                appState.notifications = notifications;
            };

            // Authentication
            const handleLogin = (email, password) => {
                const user = appState.users.find(user => user.email === email && user.password === password);
                if (user) {
                    appState.currentUser = user;
                    appState.timerStatus = 'logged-in';
                    startTimer();
                    saveState();
                    document.getElementById('loginPage').classList.add('hidden');
                    document.getElementById('appPage').classList.remove('hidden');
                    updateAppState();
                    return true;
                } else {
                    document.getElementById('loginError').classList.remove('hidden');
                    document.getElementById('loginError').textContent = 'Invalid email or password';
                    return false;
                }
            };

            const handleRegister = (userData) => {
                if (appState.users.some(user => user.email === userData.email)) {
                    document.getElementById('loginError').classList.remove('hidden');
                    document.getElementById('loginError').textContent = 'Email already exists';
                    return false;
                }
                if (userData.email !== userData.confirmEmail) {
                    document.getElementById('loginError').classList.remove('hidden');
                    document.getElementById('loginError').textContent = 'Emails do not match';
                    return false;
                }
                if (userData.password !== userData.confirmPassword) {
                    document.getElementById('loginError').classList.remove('hidden');
                    document.getElementById('loginError').textContent = 'Passwords do not match';
                    return false;
                }
                const newUser = {
                    id: generateRandomId(),
                    name: userData.name,
                    email: userData.email,
                    password: userData.password,
                    phone: userData.phone,
                    country: userData.country,
                    role: userData.role,
                    profilePic: `https://picsum.photos/200?random=${appState.users.length + 1}`
                };
                appState.users.push(newUser);
                appState.currentUser = newUser;
                appState.timerStatus = 'logged-in';
                startTimer();
                saveState();
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('appPage').classList.remove('hidden');
                updateAppState();
                return true;
            };

            const handleLogout = () => {
                appState.currentUser = null;
                appState.timerStatus = 'logged-out';
                clearInterval(appState.timerInterval);
                appState.timerInterval = null;
                appState.timerSeconds = 0;
                saveState();
                document.getElementById('appPage').classList.add('hidden');
                document.getElementById('loginPage').classList.remove('hidden');
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
                document.getElementById('loginError').classList.add('hidden');
            };

            // Timer
            const startTimer = () => {
                clearInterval(appState.timerInterval);
                appState.timerInterval = setInterval(() => {
                    appState.timerSeconds++;
                    document.getElementById('timerDisplay').textContent = formatTime(appState.timerSeconds);
                }, 1000);
                document.getElementById('timerDisplay').textContent = formatTime(appState.timerSeconds);
                const timerElement = document.querySelector('.timer');
                timerElement.className = `timer font-mono text-sm text-${appState.timerStatus === 'logged-in' ? 'accent' : appState.timerStatus === 'on-break' ? 'warning' : 'danger'}`;
            };

            const changeUserStatus = (status) => {
                if (status === 'logout') {
                    handleLogout();
                    return;
                }
                if (status === appState.timerStatus) return;
                appState.timerStatus = status;
                appState.timerSeconds = 0;
                startTimer();
                saveState();
            };

            // Task Management
            const addTask = (taskData) => {
                const newTask = {
                    id: generateRandomId(),
                    ...taskData,
                    createdAt: new Date(),
                    completedAt: null,
                    completed: false,
                    workTime: 0,
                    subtasks: [],
                    notes: ''
                };
                appState.tasks.push(newTask);
                saveState();
                addToUndoStack({ type: 'add', task: newTask });
                updateTasksCounters();
                renderTasks();
                updateCharts();
            };

            const updateTask = (taskId, updatedData) => {
                const taskIndex = appState.tasks.findIndex(task => task.id === taskId);
                if (taskIndex === -1) return;
                const oldTask = { ...appState.tasks[taskIndex] };
                appState.tasks[taskIndex] = { ...oldTask, ...updatedData };
                saveState();
                addToUndoStack({
                    type: 'update',
                    taskId,
                    oldData: oldTask,
                    newData: appState.tasks[taskIndex]
                });
                updateTasksCounters();
                renderTasks();
                updateCharts();
            };

            const toggleTaskCompletion = (taskId) => {
                const task = appState.tasks.find(task => task.id === taskId);
                if (!task) return;
                const oldCompleted = task.completed;
                task.completed = !task.completed;
                task.completedAt = task.completed ? new Date() : null;
                saveState();
                addToUndoStack({
                    type: 'toggle-completion',
                    taskId,
                    oldCompleted,
                    newCompleted: task.completed
                });
                updateTasksCounters();
                renderTasks();
                updateCharts();
            };

            const deleteTask = (taskId) => {
                const taskIndex = appState.tasks.findIndex(task => task.id === taskId);
                if (taskIndex === -1) return;
                const deletedTask = appState.tasks[taskIndex];
                appState.tasks.splice(taskIndex, 1);
                saveState();
                addToUndoStack({
                    type: 'delete',
                    task: deletedTask,
                    index: taskIndex
                });
                updateTasksCounters();
                renderTasks();
                updateCharts();
            };

            // Undo/Redo
            const addToUndoStack = (action) => {
                appState.lastAction = action;
                appState.redoStack = [];
                updateUndoRedoButtons();
            };

            const undo = () => {
                if (!appState.lastAction) return;
                const action = appState.lastAction;
                appState.redoStack.push(action);
                switch (action.type) {
                    case 'add':
                        appState.tasks = appState.tasks.filter(task => task.id !== action.task.id);
                        break;
                    case 'delete':
                        appState.tasks.splice(action.index, 0, action.task);
                        break;
                    case 'update':
                        const taskIndex = appState.tasks.findIndex(task => task.id === action.taskId);
                        if (taskIndex !== -1) appState.tasks[taskIndex] = action.oldData;
                        break;
                    case 'toggle-completion':
                        const task = appState.tasks.find(task => task.id === action.taskId);
                        if (task) {
                            task.completed = action.oldCompleted;
                            task.completedAt = task.completed ? new Date() : null;
                        }
                        break;
                }
                appState.lastAction = null;
                saveState();
                updateUndoRedoButtons();
                updateTasksCounters();
                renderTasks();
                updateCharts();
            };

            const redo = () => {
                if (appState.redoStack.length === 0) return;
                const action = appState.redoStack.pop();
                appState.lastAction = action;
                switch (action.type) {
                    case 'add':
                        appState.tasks.push(action.task);
                        break;
                    case 'delete':
                        appState.tasks.splice(action.index, 1);
                        break;
                    case 'update':
                        const taskIndex = appState.tasks.findIndex(task => task.id === action.taskId);
                        if (taskIndex !== -1) appState.tasks[taskIndex] = action.newData;
                        break;
                    case 'toggle-completion':
                        const task = appState.tasks.find(task => task.id === action.taskId);
                        if (task) {
                            task.completed = action.newCompleted;
                            task.completedAt = task.completed ? new Date() : null;
                        }
                        break;
                }
                saveState();
                updateUndoRedoButtons();
                updateTasksCounters();
                renderTasks();
                updateCharts();
            };

            const updateUndoRedoButtons = () => {
                // Placeholder for undo/redo buttons (can be added to UI if needed)
            };

            // Task Rendering
            const renderTasks = () => {
                const tasksContainer = document.getElementById('tasksContainer');
                tasksContainer.innerHTML = '';
                const filteredTasks = appState.tasks.filter(task => {
                    const search = document.getElementById('searchInput').value.toLowerCase();
                    const category = document.getElementById('categoryFilter').value;
                    const priority = document.getElementById('priorityFilter').value;
                    const status = document.getElementById('statusFilter').value;
                    return (
                        (search === '' || task.title.toLowerCase().includes(search) || task.description.toLowerCase().includes(search)) &&
                        (category === 'all' || task.category === category) &&
                        (priority === 'all' || task.priority === priority) &&
                        (status === 'all' || (status === 'active' && !task.completed) || (status === 'completed' && task.completed))
                    );
                });

                filteredTasks.forEach(task => {
                    const taskElement = document.createElement('div');
                    taskElement.className = `task-container card mb-2 flex items-center p-4 ${task.completed ? 'completed' : ''}`;
                    taskElement.innerHTML = `
                        <input type="checkbox" class="custom-checkbox mr-3" ${task.completed ? 'checked' : ''}>
                        <div class="flex-grow">
                            <div class="task-title font-medium ${task.completed ? 'text-accent' : ''}">${task.title}</div>
                            <div class="text-sm text-gray-500 dark:text-gray-400">${task.description}</div>
                            <div class="mt-2 flex space-x-2">
                                <span class="priority-${task.priority}">${task.priority.charAt(0).toUpperCase() + task.priority.slice(1)}</span>
                                <span class="due-${task.dueDate < new Date() ? 'expired' : task.dueDate < new Date(Date.now() + 7 * 24 * 60 * 60 * 1000) ? 'soon' : 'future'}">${formatDate(task.dueDate)}</span>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="edit-task text-gray-500 dark:text-gray-400 hover:text-primary" data-id="${task.id}"><i class="fas fa-edit"></i></button>
                            <button class="delete-task text-danger hover:text-red-700" data-id="${task.id}"><i class="fas fa-trash"></i></button>
                        </div>
                    `;
                    taskElement.querySelector('.custom-checkbox').addEventListener('change', () => toggleTaskCompletion(task.id));
                    taskElement.querySelector('.edit-task').addEventListener('click', () => editTask(task.id));
                    taskElement.querySelector('.delete-task').addEventListener('click', () => deleteTask(task.id));
                    tasksContainer.appendChild(taskElement);
                });
            };

            const editTask = (taskId) => {
                const task = appState.tasks.find(task => task.id === taskId);
                if (!task) return;
                document.getElementById('taskTitle').value = task.title;
                document.getElementById('taskDescription').value = task.description;
                document.getElementById('taskPriority').value = task.priority;
                document.getElementById('taskDueDate').value = formatDateForInput(task.dueDate);
                document.getElementById('addTaskModal').classList.add('active');
                document.getElementById('addTaskForm').onsubmit = (e) => {
                    e.preventDefault();
                    updateTask(taskId, {
                        title: document.getElementById('taskTitle').value,
                        description: document.getElementById('taskDescription').value,
                        priority: document.getElementById('taskPriority').value,
                        dueDate: new Date(document.getElementById('taskDueDate').value)
                    });
                    document.getElementById('addTaskModal').classList.remove('active');
                    document.getElementById('addTaskForm').reset();
                    document.getElementById('addTaskForm').onsubmit = handleAddTask;
                };
            };

            // Task Counters
            const updateTasksCounters = () => {
                document.getElementById('totalTasksCount').textContent = appState.tasks.length;
                document.getElementById('completedTasksCount').textContent = appState.tasks.filter(task => task.completed).length;
                document.getElementById('pendingTasksCount').textContent = appState.tasks.filter(task => !task.completed).length;
            };

            // Charts
            let statusChart, priorityChart;
            const initializeCharts = () => {
                const statusCtx = document.getElementById('statusChart').getContext('2d');
                const priorityCtx = document.getElementById('priorityChart').getContext('2d');

                statusChart = new Chart(statusCtx, {
                    type: 'pie',
                    data: {
                        labels: ['Active', 'Completed'],
                        datasets: [{
                            data: [0, 0],
                            backgroundColor: ['#F59E0B', '#10B981'],
                            borderColor: ['#F59E0B', '#10B981'],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: { position: 'bottom' }
                        }
                    }
                });

                priorityChart = new Chart(priorityCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Low', 'Medium', 'High'],
                        datasets: [{
                            label: 'Tasks',
                            data: [0, 0, 0],
                            backgroundColor: ['#10B981', '#F59E0B', '#EF4444'],
                            borderColor: ['#10B981', '#F59E0B', '#EF4444'],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: { beginAtZero: true }
                        },
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            };

            const updateCharts = () => {
                const activeTasks = appState.tasks.filter(task => !task.completed).length;
                const completedTasks = appState.tasks.filter(task => task.completed).length;
                statusChart.data.datasets[0].data = [activeTasks, completedTasks];
                statusChart.update();

                const lowPriority = appState.tasks.filter(task => task.priority === 'low').length;
                const mediumPriority = appState.tasks.filter(task => task.priority === 'medium').length;
                const highPriority = appState.tasks.filter(task => task.priority === 'high').length;
                priorityChart.data.datasets[0].data = [lowPriority, mediumPriority, highPriority];
                priorityChart.update();
            };

            // Event Handlers
            const handleAddTask = (e) => {
                e.preventDefault();
                addTask({
                    title: document.getElementById('taskTitle').value,
                    description: document.getElementById('taskDescription').value,
                    priority: document.getElementById('taskPriority').value,
                    dueDate: new Date(document.getElementById('taskDueDate').value),
                    category: 'work'
                });
                document.getElementById('addTaskModal').classList.remove('active');
                document.getElementById('addTaskForm').reset();
            };

            const toggleView = (view) => {
                const taskListView = document.getElementById('taskListView');
                const graphView = document.getElementById('graphView');
                const listViewBtn = document.getElementById('listViewBtn');
                const graphViewBtn = document.getElementById('graphViewBtn');
                if (view === 'list') {
                    taskListView.classList.remove('hidden');
                    graphView.classList.add('hidden');
                    listViewBtn.classList.add('btn-primary');
                    listViewBtn.classList.remove('btn-secondary');
                    graphViewBtn.classList.add('btn-secondary');
                    graphViewBtn.classList.remove('btn-primary');
                } else {
                    taskListView.classList.add('hidden');
                    graphView.classList.remove('hidden');
                    listViewBtn.classList.add('btn-secondary');
                    listViewBtn.classList.remove('btn-primary');
                    graphViewBtn.classList.add('btn-primary');
                    graphViewBtn.classList.remove('btn-secondary');
                }
            };

            // Navigation
            const hamburgerMenu = document.querySelector('.hamburger-menu');
            const headerControls = document.querySelector('.header-controls');
            hamburgerMenu.addEventListener('click', () => {
                headerControls.classList.toggle('active');
            });

            // Dropdowns
            const toggleDropdown = (dropdownId) => {
                const dropdown = document.getElementById(dropdownId);
                dropdown.classList.toggle('active');
            };

            document.getElementById('notificationBtn').addEventListener('click', () => toggleDropdown('notificationDropdown'));
            document.getElementById('profileBtn').addEventListener('click', () => toggleDropdown('profileDropdown'));

            document.querySelectorAll('#profileDropdown button[data-status]').forEach(btn => {
                btn.addEventListener('click', () => {
                    changeUserStatus(btn.dataset.status);
                    toggleDropdown('profileDropdown');
                });
            });

            // Form Submissions
            document.getElementById('loginForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                handleLogin(email, password);
            });

            document.getElementById('registerForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const userData = {
                    name: document.getElementById('registerName').value,
                    email: document.getElementById('registerEmail').value,
                    confirmEmail: document.getElementById('confirmEmail').value,
                    password: document.getElementById('registerPassword').value,
                    confirmPassword: document.getElementById('confirmPassword').value,
                    phone: document.getElementById('phoneNumber').value,
                    country: document.getElementById('countrySelect').value,
                    role: document.getElementById('roleSelect').value
                };
                handleRegister(userData);
            });

            document.getElementById('addTaskForm').addEventListener('submit', handleAddTask);

            // Filters
            document.getElementById('searchInput').addEventListener('input', renderTasks);
            document.getElementById('categoryFilter').addEventListener('change', renderTasks);
            document.getElementById('priorityFilter').addEventListener('change', renderTasks);
            document.getElementById('statusFilter').addEventListener('change', renderTasks);

            // View Toggle
            document.getElementById('listViewBtn').addEventListener('click', () => toggleView('list'));
            document.getElementById('graphViewBtn').addEventListener('click', () => toggleView('graph'));

            // Tabs
            document.getElementById('loginTabBtn').addEventListener('click', () => {
                document.getElementById('loginForm').classList.remove('hidden');
                document.getElementById('registerForm').classList.add('hidden');
                document.getElementById('loginTabBtn').classList.add('border-primary', 'text-primary');
                document.getElementById('registerTabBtn').classList.remove('border-primary', 'text-primary');
                document.getElementById('registerTabBtn').classList.add('text-gray-500', 'dark:text-gray-400');
                document.getElementById('loginError').classList.add('hidden');
            });

            document.getElementById('registerTabBtn').addEventListener('click', () => {
                document.getElementById('registerForm').classList.remove('hidden');
                document.getElementById('loginForm').classList.add('hidden');
                document.getElementById('registerTabBtn').classList.add('border-primary', 'text-primary');
                document.getElementById('loginTabBtn').classList.remove('border-primary', 'text-primary');
                document.getElementById('loginTabBtn').classList.add('text-gray-500', 'dark:text-gray-400');
                document.getElementById('loginError').classList.add('hidden');
            });

            // Initialize App
            const updateAppState = () => {
                renderTasks();
                updateTasksCounters();
                updateCharts();
                document.getElementById('profileImage').src = appState.currentUser?.profilePic || 'https://picsum.photos/100?random=1';
                document.getElementById('notificationBadge').textContent = appState.notifications.filter(n => !n.read).length;
            };

            loadState();
            initializeCountries();
            generateUsers();
            generateTasks();
            generateNotifications();
            initializeCharts();
            toggleView('list');
            if (appState.currentUser) {
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('appPage').classList.remove('hidden');
                startTimer();
                updateAppState();
            }
        });
    </script>
</body>
</html>
