<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Professional To-Do App</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts - Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <!-- Font Awesome Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />

  <!-- Flatpickr for Calendar -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

  <!-- Chart.js for Graphs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- XLSX for Export -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

  <!-- jsPDF for PDF Export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

  <!-- SortableJS for Drag and Drop -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

  <!-- Tailwind Config -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            poppins: ['Poppins', 'sans-serif']
          },
          colors: {
            primary: '#5D5CDE',
            darkRed: {
              light: '#8B0000',
              dark: '#4B0000'
            },
            darkMode: {
              light: '#1C2526',
              dark: '#000000'
            }
          },
          animation: {
            'glow': 'glow 2s ease-in-out infinite alternate',
            'fade-in': 'fadeIn 0.5s ease-in-out',
            'slide-in': 'slideIn 0.3s ease-in-out',
            'scale': 'scale 0.3s ease-in-out',
            'pulse': 'pulse 1.5s infinite',
            'bounce-light': 'bounce 1s infinite'
          },
          keyframes: {
            glow: {
              '0%': { boxShadow: '0 0 5px rgba(93, 92, 222, 0.5)' },
              '100%': { boxShadow: '0 0 20px rgba(93, 92, 222, 0.8)' }
            },
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' }
            },
            slideIn: {
              '0%': { transform: 'translateY(20px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' }
            },
            scale: {
              '0%': { transform: 'scale(0.95)' },
              '100%': { transform: 'scale(1)' }
            }
          }
        }
      }
    };
  </script>

  <style>
    /* Custom Styles */
    body {
      font-family: 'Poppins', sans-serif;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .login-button-glow {
      position: relative;
      overflow: hidden;
    }

    .login-button-glow::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg,
          rgba(93, 92, 222, 0) 0%,
          rgba(93, 92, 222, 0.8) 50%,
          rgba(93, 92, 222, 0) 100%);
      animation: rotate 3s linear infinite;
      z-index: -1;
      border-radius: inherit;
    }

    @keyframes rotate {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }

    /* Light/Dark Mode Gradients */
    .dark-mode-gradient {
      background: linear-gradient(135deg, #1C2526, #000000);
    }

    .light-mode-gradient {
      background: linear-gradient(135deg, #f8fafc, #e2e8f0);
    }
    
    /* Card Hover Effects */
    .card-hover {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .card-hover:hover {
      transform: scale(1.02);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    /* Task Status Colors */
    .status-expired {
      border-color: #DC3545 !important;
    }

    .status-warning {
      border-color: #FFC107 !important;
    }

    .status-ok {
      border-color: #28A745 !important;
    }

    /* Priority Colors */
    .priority-high {
      background-color: rgba(220, 53, 69, 0.1);
      border-left: 4px solid #DC3545;
    }

    .priority-medium {
      background-color: rgba(253, 126, 20, 0.1);
      border-left: 4px solid #FD7E14;
    }

    .priority-low {
      background-color: rgba(108, 117, 125, 0.1);
      border-left: 4px solid #6C757D;
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    .dark ::-webkit-scrollbar-track {
      background: #2d3748;
    }

    ::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #555;
    }

    /* Multi-select Action Bar */
    .action-bar {
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    .action-bar.show {
      transform: translateY(0);
    }

    /* Task Timer */
    .task-timer {
      font-variant-numeric: tabular-nums;
    }

    /* Modern Toggle Switch */
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 24px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: #5D5CDE;
    }

    input:checked + .slider:before {
      transform: translateX(26px);
    }

    /* Fade Animations */
    .fade-enter {
      opacity: 0;
    }

    .fade-enter-active {
      opacity: 1;
      transition: opacity 300ms;
    }

    .fade-exit {
      opacity: 1;
    }

    .fade-exit-active {
      opacity: 0;
      transition: opacity 300ms;
    }

    /* Toast Notifications */
    .toast {
      position: fixed;
      bottom: 20px;
      left: 20px;
      padding: 15px 20px;
      background: #fff;
      color: #333;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 9999;
      display: flex;
      align-items: center;
      gap: 10px;
      max-width: 320px;
      animation: slideInUp 0.3s, fadeOut 0.3s 4.7s;
    }

    .dark .toast {
      background: #2d3748;
      color: #fff;
    }

    @keyframes slideInUp {
      from {
        transform: translateY(100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes fadeOut {
      from {
        opacity: 1;
      }
      to {
        opacity: 0;
      }
    }

    /* Drag and Drop Styles */
    .sortable-ghost {
      opacity: 0.4;
      background-color: #f0f4f8;
    }

    .dark .sortable-ghost {
      background-color: #2d3748;
    }

    .sortable-drag {
      opacity: 0.9;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }

    /* Dark mode switch */
    .dark-mode-switch {
      position: relative;
      width: 60px;
      height: 30px;
      border-radius: 15px;
      background-color: #f0f4f8;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .dark .dark-mode-switch {
      background-color: #2d3748;
    }

    .dark-mode-switch .switch-handle {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 26px;
      height: 26px;
      border-radius: 50%;
      background-color: white;
      transition: transform 0.3s, background-color 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #FFB62B;
    }

    .dark .dark-mode-switch .switch-handle {
      transform: translateX(30px);
      background-color: #1a202c;
      color: #F5F3CE;
    }

    /* Dropdown Menu Animation */
    .dropdown-menu {
      transform-origin: top right;
      animation: scaleIn 0.2s ease;
    }

    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    /* Login form animation */
    @keyframes formAppear {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .form-appear {
      animation: formAppear 0.5s ease;
    }
  </style>
</head>
<body class="min-h-screen light-mode-gradient transition-all duration-300">
  <!-- App Container -->
  <div id="app-container" class="container mx-auto px-4 py-8 max-w-6xl">
    <!-- Login Page -->
    <div id="login-page" class="flex flex-col items-center justify-center min-h-screen form-appear">
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8 w-full max-w-md">
        <h2 class="text-3xl font-bold text-center mb-6 text-gray-800 dark:text-white">To-Do App</h2>
        <form id="login-form" class="space-y-4">
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Email</label>
            <input type="email" id="email" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" value="test@example.com">
          </div>
          <div>
            <label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Password</label>
            <input type="password" id="password" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" value="123456">
          </div>
          <div class="flex justify-center">
            <button type="submit" class="w-2/3 login-button-glow px-4 py-2 bg-primary text-white font-medium rounded-md hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transform active:scale-95 transition-all">Login</button>
          </div>
        </form>
        <div class="text-center mt-4">
          <p class="text-gray-600 dark:text-gray-400">
            Don't have an account?
            <span id="register-link" class="text-[#00008B] dark:text-blue-400 cursor-pointer hover:underline">Register now</span>
          </p>
        </div>
      </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboard-page" class="hidden animate-fade-in">
      <!-- Header -->
      <header class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mb-6 flex flex-wrap items-center justify-between">
        <h1 class="text-2xl md:text-3xl font-bold text-gray-800 dark:text-white">
          <i class="fas fa-tasks mr-2 text-primary"></i> To-Do App
        </h1>

        <div class="flex items-center space-x-4 mt-4 md:mt-0">
          <!-- Task Timer -->
          <div class="task-timer bg-gray-100 dark:bg-gray-700 rounded-lg shadow px-3 py-2 flex items-center">
            <i class="fas fa-clock text-primary mr-2"></i>
            <span id="task-timer-display" class="text-lg font-mono text-gray-800 dark:text-white">00:00:00</span>
          </div>

          <!-- Dark Mode Switch -->
          <div class="dark-mode-switch" id="dark-mode-toggle" aria-label="Toggle dark mode">
            <div class="switch-handle">
              <i class="fas fa-sun"></i>
            </div>
          </div>

          <!-- User Status Dropdown -->
          <div class="relative">
            <select id="user-status" class="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white rounded-lg px-3 py-2 appearance-none cursor-pointer pr-8">
              <option value="online" selected>Online</option>
              <option value="break">Break</option>
              <option value="busy">Busy</option>
              <option value="away">Away</option>
            </select>
            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300">
              <i class="fas fa-chevron-down text-xs"></i>
            </div>
          </div>

          <!-- Notification Button -->
          <div class="relative">
            <button id="notification-btn" class="relative p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-200">
              <i class="fas fa-bell text-gray-600 dark:text-gray-300"></i>
              <span id="notification-badge" class="absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
            </button>
            <!-- Notification Dropdown -->
            <div id="notification-dropdown" class="hidden absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-lg z-10 py-2 dropdown-menu">
              <div class="px-4 py-2 border-b border-gray-200 dark:border-gray-700">
                <h3 class="font-semibold text-gray-800 dark:text-white">Notifications</h3>
              </div>
              <div id="notification-list" class="max-h-64 overflow-y-auto">
                <!-- Notifications will be populated here -->
                <div class="px-4 py-3 text-gray-500 dark:text-gray-400 text-center">
                  No notifications yet
                </div>
              </div>
              <div class="px-4 py-2 border-t border-gray-200 dark:border-gray-700 text-center">
                <button id="mark-all-read" class="text-sm text-primary hover:text-primary-600 dark:hover:text-primary-400">
                  Mark all as read
                </button>
              </div>
            </div>
          </div>

          <!-- User Profile -->
          <div class="relative">
            <button id="profile-btn" class="relative rounded-full w-10 h-10 overflow-hidden border-2 border-green-500" aria-label="User profile">
              <img id="user-avatar" src="https://randomuser.me/api/portraits/men/32.jpg" alt="User profile" class="w-full h-full object-cover">
            </button>
            <!-- Profile Dropdown -->
            <div id="profile-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg z-10 dropdown-menu">
              <div class="py-1">
                <button id="view-profile-btn" class="block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
                  <i class="fas fa-user mr-2"></i> View Profile
                </button>
                <button id="edit-profile-btn" class="block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
                  <i class="fas fa-edit mr-2"></i> Edit Profile
                </button>
                <button id="logout-btn" class="block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
                  <i class="fas fa-sign-out-alt mr-2"></i> Logout
                </button>
              </div>
            </div>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <div class="grid grid-cols-1 gap-6">
        <!-- Tasks Summary Section -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 animate-slide-in">
          <div class="mb-4">
            <h2 class="text-xl font-semibold text-gray-800 dark:text-white flex items-center">
              <i class="fas fa-chart-pie mr-2 text-primary"></i> Tasks Overview
            </h2>
          </div>

          <!-- Total Tasks Card -->
          <div class="bg-gradient-to-r from-primary to-indigo-600 rounded-lg shadow-md p-4 mb-4 text-white">
            <div class="flex justify-between items-center">
              <div>
                <h3 class="text-lg font-semibold">Total Tasks</h3>
                <p id="total-tasks-count" class="text-3xl font-bold">0</p>
              </div>
              <div class="bg-white bg-opacity-30 p-3 rounded-full">
                <i class="fas fa-tasks text-2xl"></i>
              </div>
            </div>
          </div>

          <!-- Tasks Status Cards -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Completed Tasks -->
            <div class="bg-gradient-to-r from-green-500 to-green-600 rounded-lg shadow-md p-4 text-white card-hover">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="text-lg font-semibold">Completed Tasks</h3>
                  <p id="completed-tasks-count" class="text-3xl font-bold">0</p>
                </div>
                <div class="bg-white bg-opacity-30 p-3 rounded-full">
                  <i class="fas fa-check-circle text-2xl"></i>
                </div>
              </div>
            </div>

            <!-- Pending Tasks -->
            <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-lg shadow-md p-4 text-white card-hover">
              <div class="flex justify-between items-center">
                <div>
                  <h3 class="text-lg font-semibold">Pending Tasks</h3>
                  <p id="pending-tasks-count" class="text-3xl font-bold">0</p>
                </div>
                <div class="bg-white bg-opacity-30 p-3 rounded-full">
                  <i class="fas fa-clock text-2xl"></i>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Tasks Section -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 animate-slide-in">
          <div class="flex flex-wrap justify-between items-center mb-6">
            <h2 class="text-xl font-semibold text-gray-800 dark:text-white flex items-center">
              <i class="fas fa-list-check mr-2 text-primary"></i> Tasks
            </h2>

            <div class="flex flex-wrap gap-2 mt-4 sm:mt-0">
              <button id="add-task-btn" class="flex items-center px-4 py-2 bg-green-500 text-white rounded-lg shadow hover:bg-green-600 transition-all transform active:scale-95">
                <i class="fas fa-plus mr-2"></i> Add Task
              </button>

              <button id="manage-categories-btn" class="flex items-center px-4 py-2 bg-purple-500 text-white rounded-lg shadow hover:bg-purple-600 transition-all transform active:scale-95">
                <i class="fas fa-tags mr-2"></i> Categories
              </button>

              <button id="manage-users-btn" class="flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition-all transform active:scale-95">
                <i class="fas fa-users mr-2"></i> Users
              </button>

              <div class="dropdown relative">
                <button id="export-btn" class="flex items-center px-4 py-2 bg-indigo-500 text-white rounded-lg shadow hover:bg-indigo-600 transition-all transform active:scale-95">
                  <i class="fas fa-file-export mr-2"></i> Export
                </button>
              </div>

              <button id="import-btn" class="flex items-center px-4 py-2 bg-teal-500 text-white rounded-lg shadow hover:bg-teal-600 transition-all transform active:scale-95">
                <i class="fas fa-file-import mr-2"></i> Import
              </button>
            </div>
          </div>

          <!-- View Switcher -->
          <div class="mb-6 flex items-center justify-between flex-wrap gap-4">
            <div class="flex items-center space-x-4">
              <button id="list-view-btn" class="px-4 py-2 bg-primary text-white rounded-lg shadow flex items-center">
                <i class="fas fa-list mr-2"></i> List View
              </button>
              <button id="graph-view-btn" class="px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg shadow flex items-center">
                <i class="fas fa-chart-bar mr-2"></i> Graph View
              </button>
            </div>

            <div class="flex items-center space-x-2">
              <button id="undo-btn" class="p-2 text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary disabled:opacity-50" disabled>
                <i class="fas fa-undo"></i>
              </button>
              <button id="redo-btn" class="p-2 text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary disabled:opacity-50" disabled>
                <i class="fas fa-redo"></i>
              </button>

              <div class="border-l border-gray-300 dark:border-gray-600 h-6 mx-2"></div>

              <div class="relative">
                <select id="sort-by" class="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white rounded-lg pl-3 pr-8 py-2 appearance-none cursor-pointer">
                  <option value="dueDate-asc">Due Date (Earliest)</option>
                  <option value="dueDate-desc">Due Date (Latest)</option>
                  <option value="title-asc">Title (A-Z)</option>
                  <option value="title-desc">Title (Z-A)</option>
                  <option value="priority-desc">Priority (High to Low)</option>
                  <option value="priority-asc">Priority (Low to High)</option>
                </select>
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300">
                  <i class="fas fa-chevron-down text-xs"></i>
                </div>
              </div>
            </div>
          </div>

          <!-- Tasks List View -->
          <div id="tasks-list-view">
            <!-- Multi-select Action Bar -->
            <div id="multi-action-bar" class="hidden fixed bottom-0 left-0 right-0 bg-gradient-to-r from-primary to-indigo-600 text-white p-4 shadow-lg action-bar z-10">
              <div class="container mx-auto max-w-6xl flex items-center justify-between">
                <div>
                  <span id="selected-count" class="font-semibold">0</span> task(s) selected
                </div>
                <div class="flex space-x-3">
                  <button id="multi-complete-btn" class="px-4 py-2 bg-green-500 hover:bg-green-600 rounded-lg transition-colors">
                    <i class="fas fa-check mr-2"></i> Mark Complete
                  </button>
                  <button id="multi-delete-btn" class="px-4 py-2 bg-red-500 hover:bg-red-600 rounded-lg transition-colors">
                    <i class="fas fa-trash mr-2"></i> Delete
                  </button>
                  <button id="multi-cancel-btn" class="px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition-colors">
                    <i class="fas fa-times mr-2"></i> Cancel
                  </button>
                </div>
              </div>
            </div>

            <!-- Tasks Container -->
            <div id="tasks-container" class="space-y-4">
              <!-- Tasks will be added here -->
              <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                <i class="fas fa-tasks text-5xl mb-4 opacity-30"></i>
                <p class="text-lg">Loading tasks...</p>
              </div>
            </div>
          </div>

          <!-- Graph View -->
          <div id="tasks-graph-view" class="hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- X-Y Chart -->
              <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow-md">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4">Tasks Progress Over Time</h3>
                <div class="h-64">
                  <canvas id="tasks-line-chart"></canvas>
                </div>
              </div>

              <!-- Pie Chart -->
              <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow-md">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4">Tasks by Status</h3>
                <div class="h-64">
                  <canvas id="tasks-pie-chart"></canvas>
                </div>
              </div>
            </div>

            <!-- Additional Charts -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
              <!-- Tasks by Priority -->
              <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow-md">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4">Tasks by Priority</h3>
                <div class="h-64">
                  <canvas id="tasks-priority-chart"></canvas>
                </div>
              </div>

              <!-- Tasks by Category -->
              <div class="bg-white dark:bg-gray-700 p-4 rounded-lg shadow-md">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4">Tasks by Category</h3>
                <div class="h-64">
                  <canvas id="tasks-category-chart"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Insights Section -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 animate-slide-in">
          <div class="mb-4">
            <h2 class="text-xl font-semibold text-gray-800 dark:text-white flex items-center">
              <i class="fas fa-lightbulb mr-2 text-primary"></i> Insights
            </h2>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <div class="bg-gradient-to-r from-green-400 to-green-600 rounded-lg shadow-md p-4 text-white">
              <h3 class="text-lg font-semibold">Total Tasks</h3>
              <p class="text-3xl font-bold" id="insights-total-tasks">0</p>
            </div>
            <div class="bg-gradient-to-r from-blue-400 to-blue-600 rounded-lg shadow-md p-4 text-white">
              <h3 class="text-lg font-semibold">Completed Tasks</h3>
              <p class="text-3xl font-bold" id="insights-completed-tasks">0</p>
            </div>
            <div class="bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-lg shadow-md p-4 text-white">
              <h3 class="text-lg font-semibold">Pending Tasks</h3>
              <p class="text-3xl font-bold" id="insights-pending-tasks">0</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Registration Modal -->
  <div id="register-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl mx-4 animate-scale">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-semibold text-gray-800 dark:text-white">Register</h3>
        <button class="text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white register-close">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <form id="register-form" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- First Name -->
          <div>
            <label for="first-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">First Name</label>
            <input type="text" id="first-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
          </div>

          <!-- Last Name -->
          <div>
            <label for="last-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Last Name</label>
            <input type="text" id="last-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
          </div>

          <!-- Email -->
          <div>
            <label for="reg-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Email</label>
            <input type="email" id="reg-email" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
          </div>

          <!-- Confirm Email -->
          <div>
            <label for="confirm-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Confirm Email</label>
            <input type="email" id="confirm-email" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
          </div>

          <!-- Password -->
          <div>
            <label for="reg-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Password</label>
            <input type="password" id="reg-password" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
          </div>

          <!-- Confirm Password -->
          <div>
            <label for="confirm-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Confirm Password</label>
            <input type="password" id="confirm-password" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
          </div>

          <!-- Birthdate -->
          <div>
            <label for="birthdate" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Birthdate</label>
            <input type="text" id="birthdate" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
          </div>

          <!-- Nationality -->
          <div>
            <label for="nationality" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Nationality</label>
            <select id="nationality" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
              <option value="">Select Country</option>
              <!-- Countries will be populated here -->
            </select>
          </div>

          <!-- Role -->
          <div>
            <label for="role" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Role</label>
            <select id="role" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
              <option value="">Select Role</option>
              <option value="Manager">Manager</option>
              <option value="Staff">Staff</option>
              <option value="Customer">Customer</option>
              <option value="Admin">Admin</option>
            </select>
          </div>
        </div>

        <div class="flex justify-end space-x-3 mt-6">
          <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-all transform active:scale-95 register-close">Cancel</button>
          <button type="submit" class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all transform active:scale-95">Create</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Add/Edit Task Modal -->
  <div id="task-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl mx-4 animate-scale overflow-y-auto max-h-[90vh]">
      <div class="flex justify-between items-center mb-4">
        <h3 id="task-modal-title" class="text-xl font-semibold text-gray-800 dark:text-white">Add Task</h3>
        <button class="text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white task-modal-close">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <form id="task-form" class="space-y-4">
        <input type="hidden" id="task-id">

        <!-- Title -->
        <div>
          <label for="task-title" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Title</label>
          <input type="text" id="task-title" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
        </div>

        <!-- Description -->
        <div>
          <label for="task-description" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Description</label>
          <textarea id="task-description" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white"></textarea>
        </div>

        <!-- Sub-Tasks -->
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Sub-Tasks</label>
          <div id="subtasks-container" class="space-y-2">
            <!-- Sub-tasks will be added here -->
          </div>
          <button type="button" id="add-subtask-btn" class="mt-2 px-3 py-1 bg-primary text-white rounded-md hover:bg-opacity-90 transition-all text-sm flex items-center">
            <i class="fas fa-plus mr-1"></i> Add Sub-Task
          </button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Due Date -->
          <div>
            <label for="task-due-date" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Due Date</label>
            <input type="text" id="task-due-date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white">
          </div>

          <!-- Priority -->
          <div>
            <label for="task-priority" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Priority</label>
            <select id="task-priority" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white">
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
            </select>
          </div>

          <!-- Category -->
          <div>
            <label for="task-category" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Category</label>
            <select id="task-category" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white">
              <!-- Categories will be populated here -->
            </select>
          </div>
        </div>

        <!-- Notes -->
        <div>
          <label for="task-notes" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Notes</label>
          <textarea id="task-notes" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white"></textarea>
        </div>

        <div class="flex justify-end space-x-3 mt-6">
          <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-all transform active:scale-95 task-modal-close">Cancel</button>
          <button type="submit" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-opacity-90 transition-all transform active:scale-95">Save</button>
        </div>
      </form>
    </div>
  </div>

  <!-- View Task Modal -->
  <div id="view-task-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl mx-4 animate-scale overflow-y-auto max-h-[90vh]">
      <div class="flex justify-between items-center mb-4">
        <h3 id="view-task-title" class="text-xl font-semibold text-gray-800 dark:text-white">Task Details</h3>
        <button class="text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white view-task-modal-close">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="space-y-4">
        <div>
          <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">Description</h4>
          <p id="view-task-description" class="mt-1 text-gray-800 dark:text-white"></p>
        </div>

        <div>
          <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">Sub-Tasks</h4>
          <ul id="view-subtasks-list" class="mt-1 list-disc pl-5 text-gray-800 dark:text-white">
            <!-- Sub-tasks will be added here -->
          </ul>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">Due Date</h4>
            <p id="view-task-due-date" class="mt-1 text-gray-800 dark:text-white"></p>
          </div>

          <div>
            <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">Priority</h4>
            <p id="view-task-priority" class="mt-1"></p>
          </div>

          <div>
            <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">Category</h4>
            <p id="view-task-category" class="mt-1 text-gray-800 dark:text-white"></p>
          </div>

          <div>
            <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">Status</h4>
            <p id="view-task-status" class="mt-1"></p>
          </div>
        </div>

        <div>
          <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">Notes</h4>
          <p id="view-task-notes" class="mt-1 text-gray-800 dark:text-white"></p>
        </div>

        <div>
          <h4 class="text-sm font-medium text-gray-500 dark:text-gray-400">Time Spent</h4>
          <p id="view-task-time" class="mt-1 text-gray-800 dark:text-white">00:00:00</p>
        </div>

        <div class="flex justify-end space-x-3 mt-6">
          <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-all transform active:scale-95 view-task-modal-close">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Export Modal -->
  <div id="export-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md mx-4 animate-scale">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-semibold text-gray-800 dark:text-white">Export Tasks</h3>
        <button class="text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white export-modal-close">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Format</label>
          <select id="export-format" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white">
            <option value="json">JSON</option>
            <option value="pdf">PDF</option>
            <option value="excel">Excel</option>
            <option value="csv">CSV</option>
          </select>
        </div>

        <div class="flex justify-end space-x-3 mt-6">
          <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-all transform active:scale-95 export-modal-close">Cancel</button>
          <button type="button" id="download-btn" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-opacity-90 transition-all transform active:scale-95">Download</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Import Modal -->
  <div id="import-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md mx-4 animate-scale">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-semibold text-gray-800 dark:text-white">Import Tasks</h3>
        <button class="text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white import-modal-close">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="space-y-4">
        <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center">
          <i class="fas fa-file-upload text-4xl text-gray-400 mb-3"></i>
          <p class="text-gray-600 dark:text-gray-400 mb-2">Drag and drop a JSON file or click to browse</p>
          <input type="file" id="import-file" class="hidden" accept=".json">
          <button type="button" id="browse-file-btn" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-opacity-90 transition-all">Browse Files</button>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Or import from URL</label>
          <input type="url" id="import-url" placeholder="https://example.com/tasks.json" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white">
        </div>

        <div class="flex justify-end space-x-3 mt-6">
          <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-all transform active:scale-95 import-modal-close">Cancel</button>
          <button type="button" id="import-btn-confirm" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-opacity-90 transition-all transform active:scale-95">Import</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Categories Modal -->
  <div id="categories-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md mx-4 animate-scale">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-semibold text-gray-800 dark:text-white">Manage Categories</h3>
        <button class="text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white categories-modal-close">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="space-y-4">
        <div class="flex space-x-2">
          <input type="text" id="new-category" placeholder="Add new category" class="flex-1 rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white">
          <button type="button" id="add-category-btn" class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-all transform active:scale-95">
            <i class="fas fa-plus"></i>
          </button>
        </div>

        <div class="border rounded-lg overflow-hidden">
          <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
            <thead class="bg-gray-50 dark:bg-gray-700">
              <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Category</th>
                <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Actions</th>
              </tr>
            </thead>
            <tbody id="categories-list" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
              <!-- Categories will be listed here -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Users Modal -->
  <div id="users-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-4xl mx-4 animate-scale overflow-y-auto max-h-[90vh]">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-semibold text-gray-800 dark:text-white">Users</h3>
        <button class="text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white users-modal-close">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="users-container">
        <!-- Users will be added here -->
        <div class="text-center py-8 text-gray-500 dark:text-gray-400">
          <i class="fas fa-spinner fa-spin text-3xl mb-4"></i>
          <p>Loading users...</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Profile View Modal -->
  <div id="profile-view-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md mx-4 animate-scale">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-semibold text-gray-800 dark:text-white">Profile</h3>
        <button class="text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white profile-view-modal-close">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="text-center mb-6">
        <div class="relative w-24 h-24 mx-auto mb-4">
          <img id="profile-image" src="https://randomuser.me/api/portraits/men/32.jpg" alt="Profile Picture" class="w-full h-full rounded-full object-cover">
        </div>
        <h4 id="profile-name" class="text-xl font-semibold text-gray-800 dark:text-white">John Doe</h4>
        <p id="profile-role" class="text-gray-600 dark:text-gray-400">Manager</p>
      </div>

      <div class="space-y-3">
        <div class="flex">
          <span class="w-1/3 text-gray-500 dark:text-gray-400">Email:</span>
          <span id="profile-email" class="w-2/3 text-gray-800 dark:text-white">john.doe@example.com</span>
        </div>
        <div class="flex">
          <span class="w-1/3 text-gray-500 dark:text-gray-400">Country:</span>
          <span id="profile-country" class="w-2/3 text-gray-800 dark:text-white">United States</span>
        </div>
        <div class="flex">
          <span class="w-1/3 text-gray-500 dark:text-gray-400">Joining Date:</span>
          <span id="profile-joining-date" class="w-2/3 text-gray-800 dark:text-white">June 1, 2023</span>
        </div>
      </div>

      <div class="flex justify-end space-x-3 mt-6">
        <button type="button" id="profile-edit-btn" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-opacity-90 transition-all transform active:scale-95">Edit Profile</button>
        <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-all transform active:scale-95 profile-view-modal-close">Close</button>
      </div>
    </div>
  </div>

  <!-- Profile Edit Modal -->
  <div id="profile-edit-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md mx-4 animate-scale">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-semibold text-gray-800 dark:text-white">Edit Profile</h3>
        <button class="text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white profile-edit-modal-close">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <form id="profile-edit-form" class="space-y-4">
        <div class="text-center mb-6">
          <div class="relative w-24 h-24 mx-auto mb-2">
            <img id="edit-profile-image" src="https://randomuser.me/api/portraits/men/32.jpg" alt="Profile Picture" class="w-full h-full rounded-full object-cover">
            <button type="button" id="change-avatar-btn" class="absolute bottom-0 right-0 bg-primary text-white rounded-full p-2 shadow-md">
              <i class="fas fa-camera"></i>
            </button>
          </div>
          <input type="file" id="avatar-upload" class="hidden" accept="image/*">
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label for="edit-first-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">First Name</label>
            <input type="text" id="edit-first-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
          </div>

          <div>
            <label for="edit-last-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Last Name</label>
            <input type="text" id="edit-last-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
          </div>
        </div>

        <div>
          <label for="edit-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Email</label>
          <input type="email" id="edit-email" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
        </div>

        <div>
          <label for="edit-country" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Country</label>
          <select id="edit-country" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
            <!-- Countries will be populated here -->
          </select>
        </div>

        <div>
          <label for="edit-role" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Role</label>
          <select id="edit-role" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
            <option value="Manager">Manager</option>
            <option value="Staff">Staff</option>
            <option value="Customer">Customer</option>
            <option value="Admin">Admin</option>
          </select>
        </div>

        <div class="flex justify-end space-x-3 mt-6">
          <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-all transform active:scale-95 profile-edit-modal-close">Cancel</button>
          <button type="submit" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-opacity-90 transition-all transform active:scale-95">Save Changes</button>
        </div>
      </form>
    </div>
  </div>

    <!-- Date Range Modal -->
    <div id="date-range-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md mx-4 animate-scale">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-semibold text-gray-800 dark:text-white">Select Date Range</h3>
          <button class="text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white date-range-modal-close">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <div class="space-y-4">
          <div>
            <label for="date-range-start" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Start Date</label>
            <input type="text" id="date-range-start" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white">
          </div>

          <div>
            <label for="date-range-end" class="block text-sm font-medium text-gray-700 dark:text-gray-300">End Date</label>
            <input type="text" id="date-range-end" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 text-base dark:bg-gray-700 dark:border-gray-600 dark:text-white">
          </div>

          <div class="flex justify-end space-x-3 mt-6">
            <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-all transform active:scale-95 date-range-modal-close">Cancel</button>
            <button type="button" id="apply-date-range" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-opacity-90 transition-all transform active:scale-95">Apply</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Notifications Container -->
  <div id="toast-container"></div>

  <!-- Script Section -->
  <script>
    // ===============================
    // Utility Functions & DOM Elements
    // ===============================

    const generateId = () => '_' + Math.random().toString(36).substr(2, 9);

    const formatTime = (seconds) => {
      const hours = Math.floor(seconds / 3600);
      const minutes = Math.floor((seconds % 3600) / 60);
      const secs = seconds % 60;
      return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    };

    const formatDate = (dateStr) => {
      if (!dateStr) return '';
      const date = new Date(dateStr);
      return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
    };

    const showToast = (message, type = 'info') => {
      const toast = document.createElement('div');
      toast.className = 'toast';
      let iconClass = 'fa-info-circle';
      if (type === 'success') iconClass = 'fa-check-circle';
      if (type === 'error') iconClass = 'fa-exclamation-circle';
      if (type === 'warning') iconClass = 'fa-exclamation-triangle';
      toast.innerHTML = `<i class="fas ${iconClass} mr-2"></i><span>${message}</span>`;
      document.getElementById('toast-container').appendChild(toast);
      setTimeout(() => {
        toast.style.opacity = '0';
        setTimeout(() => { toast.remove(); }, 300);
      }, 5000);
    };

    // ===============================
    // Modified Export Functionality
    // ===============================

    // Trigger file download through creating a temporary anchor element.
    const triggerDownload = (blob, filename) => {
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      setTimeout(() => {
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }, 100);
    };

    const exportTasks = () => {
      const format = document.getElementById('export-format').value;
      let filename = 'tasks';
      if (format === 'json') {
        const jsonContent = JSON.stringify(tasks, null, 2);
        const blob = new Blob([jsonContent], { type: 'application/json' });
        filename += '.json';
        triggerDownload(blob, filename);
      } else if (format === 'pdf') {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        doc.setFontSize(16);
        doc.text('Tasks Report', 20, 20);
        doc.setFontSize(10);
        doc.text(`Generated: ${new Date().toLocaleString()}`, 20, 30);
        doc.text(`Total Tasks: ${tasks.length}`, 20, 35);
        doc.text(`Completed: ${tasks.filter(t => t.completed).length}`, 20, 40);
        doc.text(`Pending: ${tasks.filter(t => !t.completed).length}`, 20, 45);
        const tableRows = tasks.map(task => [
          task.title,
          task.category || '-',
          task.priority,
          task.dueDate ? formatDate(task.dueDate) : '-',
          task.completed ? 'Completed' : 'Pending'
        ]);
        doc.autoTable({
          startY: 55,
          head: [['Title', 'Category', 'Priority', 'Due Date', 'Status']],
          body: tableRows,
          theme: 'striped',
          styles: { fontSize: 8 },
          headStyles: { fillColor: [93, 92, 222] }
        });
        const pdfBlob = doc.output('blob');
        filename += '.pdf';
        triggerDownload(pdfBlob, filename);
      } else if (format === 'excel' || format === 'csv') {
        const worksheet = XLSX.utils.json_to_sheet(tasks.map(task => ({
          Title: task.title,
          Description: task.description,
          'Due Date': task.dueDate ? formatDate(task.dueDate) : '',
          Priority: task.priority,
          Category: task.category || '',
          Status: task.completed ? 'Completed' : 'Pending',
          Notes: task.notes || ''
        })));
        const workbook = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(workbook, worksheet, 'Tasks');
        if (format === 'excel') {
          const excelBlob = new Blob([XLSX.write(workbook, { bookType: 'xlsx', type: 'array' })], {
            type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
          });
          filename += '.xlsx';
          triggerDownload(excelBlob, filename);
        } else {
          const csvContent = XLSX.utils.sheet_to_csv(worksheet);
          const csvBlob = new Blob([csvContent], { type: 'text/csv' });
          filename += '.csv';
          triggerDownload(csvBlob, filename);
        }
      }
      showToast(`${filename} file generated and downloading`, 'info');
      exportModal.classList.add('hidden');
    };

    // ===============================
    // (Placeholder) Other Code & Event Listeners
    // ===============================
    // The rest of the code includes DOM selection for elements such as login,
    // tasks, profile management, notifications, filtering, and drag-and-drop functionality.
    // It also manages charts, localStorage persistence, and undo/redo actions.
    // For brevity, the complete implementation is maintained as in the first part.
    // (Refer to the full code preceding this completion for all event listener setup and utility functions.)

    // For example, you would have:
    // - loadTasks(), renderTasks(), updateCharts(), handleLogin(), handleRegister(), handleTaskSubmit(), etc.
    // - and all event listeners that tie your UI to these functions.
    // Finally, you would call initialization functions (such as loadTasks() etc.) on DOMContentLoaded.

    // ===============================
    // Example Initialization (for context)
    // ===============================
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize date pickers for task due date and custom range
      flatpickr('#birthdate', { dateFormat: 'Y-m-d', maxDate: 'today' });
      flatpickr('#task-due-date', { dateFormat: 'Y-m-d', minDate: 'today' });
      flatpickr('#date-range-start', { dateFormat: 'Y-m-d' });
      flatpickr('#date-range-end', { dateFormat: 'Y-m-d' });

      // Load tasks, user data, notifications, categories, charts, etc.
      // Then render the dashboard
      // loadTasks();
      // renderTasks();
      // initCharts();
      // updateCharts();
      // etc.

      // Set up event listener for the download button for export tasks
      document.getElementById('download-btn').addEventListener('click', exportTasks);

      // (Other event listener code would be here as in the full application.)
    });
  </script>
</body>
</html>
